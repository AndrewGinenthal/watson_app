<html ng-app ="speechApp">
<head>
	<title></title>
	<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.5/angular.min.js"></script>
	<link rel="stylesheet" type="text/css" href="css/styles.css">
	<link href='https://fonts.googleapis.com/css?family=Muli' rel='stylesheet' type='text/css'>


</head>


<body ng-controller = "doStuff as ctrl">



<div id="openModal" class="modalDialog">
    <div>	<a href="#close" title="Close" class="close">X</a>

        	<h2 style = "text-align: center">Begin your journey of computer-facilitated self-insight</h2>

			<form id="signUp" ng-if="!ctrl.user" >
				<h2>New Signup</h2>
				<input type="text" ng-model="ctrl.signUpData.email" placeholder="email">
				<input type="password" ng-model="ctrl.signUpData.password" placeholder="password">
				<input type="text" ng-model="ctrl.signUpData.username" placeholder="username">
				<a class = "modalButtons" href = "#close" ng-click="ctrl.signUp()"> Sign Up</a></br>

			</form>
    </div>
</div>

<div id="openEdit" class="modalDialog">
    <div>	<a href="#close" title="Close" class="close">X</a>

        	<h2 style = "text-align: center">Change your username or email</h2>
        	<form id = "editUser">
				<input ng-model = "ctrl.newData.email" type = "text" placeholder = "new email">
				<input ng-model = "ctrl.newData.username" type = "text" placeholder = "new username">
				<a class = "modalButtons" href = "#close" ng-click="ctrl.submitEdit()"> Update</a></br>
			</form>

    </div>
</div>

<header>
	<form id="logIn" ng-if="!ctrl.user">
		<input ng-model="ctrl.loginData.email" type="text" placeholder="email">
		<input ng-model="ctrl.loginData.password" type="password" placeholder="password">
		<button ng-click="ctrl.logIn()">Log in</button>
		<a class = "modalButtons" href="#openModal">Sign Up!</a>
		<span id = "badLogin" style = "color:red"></span>
	</form>
	<div ng-if="ctrl.user">
		<button ng-click = "ctrl.logout()">Log out</button> 
		<a class = "modalButtons" href="#openEdit">Edit account details!</a>
	</div>
	
</header>
<br>
<div id = "title">
<h1 ng-if="!ctrl.user">Look on the bright side!</h1>
<h1 ng-if="ctrl.user">Look on the bright side, {{ctrl.single.username}}!</h1>

</div>

<div id = "inputsContainer">
	<h2>What's on your mind? Speak naturally or type as you would in a journal</h2>
	<div id = "mainInputs">

	<input size = "80" ng-model="ctrl.transcript" id = "transcription"></input>
	<button id="button-play-ws" >Listen</button>
	<button id="button-stop-ws " ng-click="ctrl.addTranscript()" class="button-demo">analyze</button>
	</div>
	<br>
	<br>
</div>
<br>
<div id = "everythingAfterInput">

	<div ng-if="ctrl.user" id = "chartContainer">
		<canvas id="myChart" ></canvas>
	</div>

	<div class = "leftSide" ng-if="ctrl.user" id = "currentWrapper">
		<div  id = "currentSentence">
			
		</div>
		<div id = "stats">

		</div>
		
		<a href="#" class = "modalButtons" id = "deleteButton" ng-click = "ctrl.delete(ctrl.sentence, ctrl.deleteIndex)">I have made peace with this thought</a>
	</div>

	<div class = "leftSide" id="sentences" ng-if="ctrl.user">
		<h2>My Saved Thoughts</h2>
		<div>
			<div class ="individual" ng-repeat = "sentence in ctrl.single.sentences track by $index" >
				<button ng-click = "ctrl.showOne($index)">Get Report</button>
				
					 {{sentence.content}} <br>				
			</div>

		</div>

	</div>
</div>


<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/1.0.2/Chart.min.js"></script>
<script type="text/javascript" src = "js/app.js"></script>


</body>
</html>